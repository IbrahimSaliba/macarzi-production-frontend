import{a as L}from"./chunk-ZHXSHU6C.js";import{wd as P}from"./chunk-2BYPWJHQ.js";import"./chunk-WACMVKXJ.js";import"./chunk-2QSN2QZ4.js";import"./chunk-G2XYFENO.js";import"./chunk-A6GTVXL6.js";import"./chunk-KCCW6LK5.js";import{a as k}from"./chunk-KV7E3DUU.js";import{$a as p,Gc as M,Ja as a,Kb as i,Lb as o,Mb as h,Oa as g,Uc as T,Wa as N,Wc as w,Xa as x,Y as f,Zc as S,db as l,ga as I,ha as b,ob as t,pb as e,qb as u,tc as A,ub as _,vc as y,wb as D,xb as v}from"./chunk-MSHI2ENP.js";import"./chunk-EQDQRRRY.js";function B(r,c){r&1&&(t(0,"div",9)(1,"div",10)(2,"span",11),i(3,"Loading..."),e()(),t(4,"p",12),i(5,"Loading customer details..."),e()())}function V(r,c){if(r&1){let n=_();t(0,"div",13),u(1,"i",14),t(2,"p",12),i(3),e(),t(4,"button",15),D("click",function(){I(n);let m=v();return b(m.goBack())}),i(5,"Back to Customers"),e()()}if(r&2){let n=v();a(3),o(n.errorMessage)}}function R(r,c){r&1&&(t(0,"span",49),u(1,"i",50),i(2,"Verified "),e())}function O(r,c){r&1&&(t(0,"span",51),u(1,"i",52),i(2,"Not Verified "),e())}function $(r,c){r&1&&(t(0,"span",53),i(1,"Yes"),e())}function z(r,c){r&1&&(t(0,"span",54),i(1,"No"),e())}function U(r,c){r&1&&(t(0,"span",53),i(1,"Yes"),e())}function G(r,c){r&1&&(t(0,"span",54),i(1,"No"),e())}function Y(r,c){if(r&1&&(t(0,"div",39)(1,"div",3)(2,"h6",40),i(3,"Viewer ID"),e(),t(4,"p",41),i(5),e()()()),r&2){let n=v(2);a(5),o(n.customerData.viewerId)}}function J(r,c){if(r&1&&(t(0,"div")(1,"div",16)(2,"div",17)(3,"div",18)(4,"h5"),i(5,"Basic Details"),e()(),t(6,"div",19)(7,"div",20)(8,"span",21),i(9),e(),t(10,"div")(11,"h6",22),i(12),e(),t(13,"div",20)(14,"p",23),i(15),e()()()(),t(16,"div",24)(17,"span",25),i(18),e(),p(19,R,3,0,"span",26)(20,O,3,0,"span",27),e()()()(),t(21,"div",28)(22,"div",29)(23,"ul",30)(24,"li",31)(25,"a",32),i(26,"Personal Info"),e()(),t(27,"li",31)(28,"a",33),i(29,"Contact Info"),e()(),t(30,"li",31)(31,"a",34),i(32,"Meeting Details"),e()(),t(33,"li",31)(34,"a",35),i(35,"Additional Info"),e()()()(),t(36,"div",17)(37,"div",36)(38,"div",37)(39,"div",38)(40,"div",39)(41,"div",3)(42,"h6",40),i(43,"First Name"),e(),t(44,"p",41),i(45),e()()(),t(46,"div",39)(47,"div",3)(48,"h6",40),i(49,"Middle Name"),e(),t(50,"p",41),i(51),e()()(),t(52,"div",39)(53,"div",3)(54,"h6",40),i(55,"Last Name"),e(),t(56,"p",41),i(57),e()()(),t(58,"div",39)(59,"div",3)(60,"h6",40),i(61,"Date of Birth"),e(),t(62,"p",41),i(63),e()()(),t(64,"div",39)(65,"div",3)(66,"h6",40),i(67,"Gender"),e(),t(68,"p",41),i(69),e()()()()(),t(70,"div",42)(71,"div",38)(72,"div",39)(73,"div",3)(74,"h6",40),i(75,"Email"),e(),t(76,"p",41),i(77),e()()(),t(78,"div",39)(79,"div",3)(80,"h6",40),i(81,"Phone Number"),e(),t(82,"p",41),i(83),e()()(),t(84,"div",39)(85,"div",3)(86,"h6",40),i(87,"Alternate Phone"),e(),t(88,"p",41),i(89),e()()(),t(90,"div",43)(91,"div",3)(92,"h6",40),i(93,"Address"),e(),t(94,"p",41),i(95),e()()(),t(96,"div",39)(97,"div",3)(98,"h6",40),i(99,"City"),e(),t(100,"p",41),i(101),e()()(),t(102,"div",39)(103,"div",3)(104,"h6",40),i(105,"Province"),e(),t(106,"p",41),i(107),e()()(),t(108,"div",39)(109,"div",3)(110,"h6",40),i(111,"Postal Code"),e(),t(112,"p",41),i(113),e()()()()(),t(114,"div",44)(115,"div",38)(116,"div",39)(117,"div",3)(118,"h6",40),i(119,"Meeting Type"),e(),t(120,"p",41),i(121),e()()(),t(122,"div",39)(123,"div",3)(124,"h6",40),i(125,"Location Type"),e(),t(126,"p",41),i(127),e()()(),t(128,"div",39)(129,"div",3)(130,"h6",40),i(131,"Meeting Branch"),e(),t(132,"p",41),i(133),e()()(),t(134,"div",43)(135,"div",3)(136,"h6",40),i(137,"Meeting Address"),e(),t(138,"p",41),i(139),e()()(),t(140,"div",39)(141,"div",3)(142,"h6",40),i(143,"Meeting Date"),e(),t(144,"p",41),i(145),e()()(),t(146,"div",39)(147,"div",3)(148,"h6",40),i(149,"Meeting Time"),e(),t(150,"p",41),i(151),e()()(),t(152,"div",39)(153,"div",3)(154,"h6",40),i(155,"Time Range"),e(),t(156,"p",41),i(157),e()()(),t(158,"div",39)(159,"div",3)(160,"h6",40),i(161,"Meeting Confirmed"),e(),p(162,$,2,0,"span",45)(163,z,2,0,"span",46),e()(),t(164,"div",43)(165,"div",3)(166,"h6",40),i(167,"Meeting Notes"),e(),t(168,"p",41),i(169),e()()()()(),t(170,"div",47)(171,"div",38)(172,"div",39)(173,"div",3)(174,"h6",40),i(175,"Preferred Contact Time"),e(),t(176,"p",41),i(177),e()()(),t(178,"div",39)(179,"div",3)(180,"h6",40),i(181,"Preferred Contact Method"),e(),t(182,"p",41),i(183),e()()(),t(184,"div",39)(185,"div",3)(186,"h6",40),i(187,"Terms Accepted"),e(),p(188,U,2,0,"span",45)(189,G,2,0,"span",46),e()(),t(190,"div",43)(191,"div",3)(192,"h6",40),i(193,"Additional Notes"),e(),t(194,"p",41),i(195),e()()(),t(196,"div",39)(197,"div",3)(198,"h6",40),i(199,"Proceeded At"),e(),t(200,"p",41),i(201),e()()(),t(202,"div",39)(203,"div",3)(204,"h6",40),i(205,"Created At"),e(),t(206,"p",41),i(207),e()()(),p(208,Y,6,1,"div",48),e()()()()()()),r&2){let n=v();a(9),h(" ",n.getInitial()," "),a(3),o(n.getFullName()),a(3),h("Added On : ",n.formatDate(n.customerData.createdAt),""),a(2),l("ngClass",n.getStatusClass(n.customerData.status)),a(),h(" Status: ",n.customerData.status||"N/A"," "),a(),l("ngIf",n.customerData.isVerified),a(),l("ngIf",!n.customerData.isVerified),a(25),o(n.customerData.firstName||"N/A"),a(6),o(n.customerData.middleName||"N/A"),a(6),o(n.customerData.lastName||"N/A"),a(6),o(n.customerData.dateOfBirth||"N/A"),a(6),o(n.customerData.gender||"N/A"),a(8),o(n.customerData.email||"N/A"),a(6),o(n.customerData.phone||"N/A"),a(6),o(n.customerData.alternatePhone||"N/A"),a(6),o(n.customerData.address||"N/A"),a(6),o(n.customerData.city||"N/A"),a(6),o(n.customerData.province||"N/A"),a(6),o(n.customerData.postalCode||"N/A"),a(8),o(n.customerData.meetingType||"N/A"),a(6),o(n.customerData.meetingLocationType||"N/A"),a(6),o(n.customerData.meetingBranch||"N/A"),a(6),o(n.customerData.meetingAddress||"N/A"),a(6),o(n.customerData.meetingDate||"N/A"),a(6),o(n.formatTime(n.customerData.meetingTime)),a(6),o(n.customerData.timeRange||"N/A"),a(5),l("ngIf",n.customerData.isMeetingConfirmed),a(),l("ngIf",!n.customerData.isMeetingConfirmed),a(6),o(n.customerData.meetingNotes||"N/A"),a(8),o(n.customerData.preferredContactTime||"N/A"),a(6),o(n.customerData.preferredContactMethod||"N/A"),a(5),l("ngIf",n.customerData.acceptTermsAndConditions),a(),l("ngIf",!n.customerData.acceptTermsAndConditions),a(6),o(n.customerData.additionalNotes||"N/A"),a(6),o(n.formatDate(n.customerData.proceededAt)),a(6),o(n.formatDate(n.customerData.createdAt)),a(),l("ngIf",n.customerData.viewerId)}}var C=(()=>{class r{constructor(n,s,m){this.route=n,this.router=s,this.apiService=m,this.routes=k,this.customerData=null,this.isLoading=!0,this.hasError=!1,this.errorMessage="",this.mode="view"}ngOnInit(){this.route.params.subscribe(n=>{let s=n.id;this.mode=n.mode||"view";let m=sessionStorage.getItem("currentCustomerData");if(m)try{let d=JSON.parse(m);d.originalData?this.customerData=d.originalData:this.customerData=d,this.isLoading=!1}catch(d){console.error("Error parsing stored customer data:",d),this.fetchCustomerFromAPI(s)}else s?this.fetchCustomerFromAPI(s):(this.isLoading=!1,this.hasError=!0,this.errorMessage="No customer ID provided")})}fetchCustomerFromAPI(n){this.isLoading=!0;let s={page:0,sortBy:"Descending",fromDate:"",toDate:"",status:"",pageSize:1e4};this.apiService.getCustomersFilter(s).subscribe({next:m=>{if(this.isLoading=!1,m&&m.data&&Array.isArray(m.data)){let d=m.data.find(E=>E.id===n);d?this.customerData=d:(this.hasError=!0,this.errorMessage="Customer not found")}else this.hasError=!0,this.errorMessage="Failed to load customer data"},error:m=>{this.isLoading=!1,this.hasError=!0,this.errorMessage="Failed to load customer data. Please try again.",console.error("Error fetching customer:",m)}})}getFullName(){return this.customerData&&`${this.customerData.firstName||""} ${this.customerData.lastName||""}`.trim()||"N/A"}getFullAddress(){if(!this.customerData)return"N/A";let n=[this.customerData.address,this.customerData.city,this.customerData.province,this.customerData.postalCode].filter(s=>s);return n.length>0?n.join(", "):"N/A"}formatDate(n){if(!n)return"N/A";try{return new Date(n).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"})}catch{return n}}formatTime(n){if(!n)return"N/A";try{let[s,m]=n.split(":"),d=parseInt(s,10),E=d>=12?"PM":"AM";return`${d%12||12}:${m} ${E}`}catch{return n}}getStatusClass(n){switch(n?.toUpperCase()){case"NEW":return"bg-info-transparent";case"ACTIVE":return"bg-success-transparent";case"PENDING":return"bg-warning-transparent";case"INACTIVE":return"bg-secondary-transparent";case"COMPLETED":return"bg-primary-transparent";default:return"bg-secondary-transparent"}}getInitial(){return this.customerData&&(this.customerData.firstName||"").charAt(0).toUpperCase()||"?"}goBack(){this.router.navigate([this.routes.customers])}static{this.\u0275fac=function(s){return new(s||r)(g(T),g(w),g(L))}}static{this.\u0275cmp=N({type:r,selectors:[["app-customer-details"]],standalone:!1,decls:10,vars:3,consts:[[1,"content","me-0"],[1,"row","justify-content-center"],[1,"col-lg-10"],[1,"mb-3"],["href","javascript:void(0);",1,"d-inline-flex","align-items-center","fw-medium",3,"click"],[1,"ti","ti-arrow-left","me-1"],["class","text-center p-5",4,"ngIf"],["class","alert alert-danger text-center p-4",4,"ngIf"],[4,"ngIf"],[1,"text-center","p-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"alert","alert-danger","text-center","p-4"],[1,"ti","ti-alert-circle","me-2",2,"font-size","2rem"],[1,"btn","btn-primary","mt-2",3,"click"],[1,"card"],[1,"card-body"],[1,"border-bottom","mb-3","pb-3"],[1,"d-flex","align-items-center","justify-content-between","flex-wrap","gap-3"],[1,"d-flex","align-items-center"],[1,"avatar","avatar-lg","me-3","bg-primary","text-white","d-flex","align-items-center","justify-content-center",2,"font-size","1.5rem"],[1,"mb-1"],[1,"mb-0","me-2"],[1,"d-flex","align-items-center","flex-wrap","gap-3"],[1,"badge","badge-md",3,"ngClass"],["class","badge badge-md bg-success-transparent",4,"ngIf"],["class","badge badge-md bg-warning-transparent",4,"ngIf"],[1,"card","mb-4","mb-xl-0"],[1,"card-header","py-0"],[1,"nav","nav-tabs","nav-tabs-bottom","tab-dark"],[1,"nav-item"],["href","#personal-info","data-bs-toggle","tab",1,"nav-link","active"],["href","#contact-info","data-bs-toggle","tab",1,"nav-link"],["href","#meeting-info","data-bs-toggle","tab",1,"nav-link"],["href","#additional-info","data-bs-toggle","tab",1,"nav-link"],[1,"tab-content"],["id","personal-info",1,"tab-pane","fade","active","show"],[1,"row"],[1,"col-md-4","col-sm-6"],[1,"fs-14","fw-semibold","mb-1"],[1,"fs-13"],["id","contact-info",1,"tab-pane","fade"],[1,"col-md-12"],["id","meeting-info",1,"tab-pane","fade"],["class","badge bg-success",4,"ngIf"],["class","badge bg-secondary",4,"ngIf"],["id","additional-info",1,"tab-pane","fade"],["class","col-md-4 col-sm-6",4,"ngIf"],[1,"badge","badge-md","bg-success-transparent"],[1,"ti","ti-check","me-1"],[1,"badge","badge-md","bg-warning-transparent"],[1,"ti","ti-clock","me-1"],[1,"badge","bg-success"],[1,"badge","bg-secondary"]],template:function(s,m){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),D("click",function(){return m.goBack()}),u(5,"i",5),i(6,"Back to Customers "),e()(),p(7,B,6,0,"div",6)(8,V,6,1,"div",7)(9,J,209,37,"div",8),e()()()),s&2&&(a(7),l("ngIf",m.isLoading),a(),l("ngIf",m.hasError),a(),l("ngIf",!m.isLoading&&!m.hasError&&m.customerData))},dependencies:[A,y],encapsulation:2})}}return r})();var W=[{path:"",component:C},{path:":id/:mode",component:C}],j=(()=>{class r{static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275mod=x({type:r})}static{this.\u0275inj=f({imports:[S.forChild(W),S]})}}return r})();var me=(()=>{class r{static{this.\u0275fac=function(s){return new(s||r)}}static{this.\u0275mod=x({type:r})}static{this.\u0275inj=f({imports:[M,j,P]})}}return r})();export{me as CustomerDetailsModule};
