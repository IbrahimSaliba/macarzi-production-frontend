import{a as L}from"./chunk-ZHXSHU6C.js";import{wd as k}from"./chunk-2BYPWJHQ.js";import"./chunk-WACMVKXJ.js";import"./chunk-2QSN2QZ4.js";import"./chunk-G2XYFENO.js";import"./chunk-A6GTVXL6.js";import"./chunk-KCCW6LK5.js";import{a as _}from"./chunk-KV7E3DUU.js";import{$a as h,Gc as R,Ja as r,Kb as a,Lb as d,Mb as p,Oa as x,Uc as A,Wa as N,Wc as M,Xa as g,Y as f,Zc as S,db as l,ga as b,ha as E,ob as i,pb as t,qb as v,tc as w,ub as I,vc as y,wb as D,xb as c}from"./chunk-MSHI2ENP.js";import"./chunk-EQDQRRRY.js";function F(n,u){n&1&&(i(0,"div",9)(1,"div",10)(2,"span",11),a(3,"Loading..."),t()(),i(4,"p",12),a(5,"Loading reservation details..."),t()())}function V(n,u){if(n&1){let e=I();i(0,"div",13),v(1,"i",14),i(2,"p",12),a(3),t(),i(4,"button",15),D("click",function(){b(e);let s=c();return E(s.goBack())}),a(5,"Back to Reservations"),t()()}if(n&2){let e=c();r(3),d(e.errorMessage)}}function B(n,u){if(n&1&&(i(0,"div",12)(1,"small",41),a(2),t()()),n&2){let e=c(2);r(2),p("ID: ",e.reservationData.viewerId,"")}}function $(n,u){if(n&1&&(i(0,"div",30)(1,"span",70),a(2),t(),i(3,"div")(4,"h6",61),a(5),t()()()),n&2){let e=c(2);r(2),p(" ",e.getInitial(e.reservationData.customerFirstName)," "),r(3),d(e.getCustomerName())}}function O(n,u){n&1&&(i(0,"div",41)(1,"p",47),a(2,"No customer assigned yet"),t()())}function U(n,u){if(n&1&&(i(0,"div",12)(1,"small",41),a(2),t()()),n&2){let e=c(2);r(2),p("ID: ",e.reservationData.customerId,"")}}function z(n,u){if(n&1){let e=I();i(0,"div")(1,"div",16)(2,"div",17)(3,"h5"),a(4,"Reservation Details"),t(),i(5,"span",18),a(6),t()(),i(7,"div",19)(8,"ul",20)(9,"li",21)(10,"a",22),a(11,"Reservation Info"),t()(),i(12,"li",21)(13,"a",23),a(14,"Car Details"),t()(),i(15,"li",21)(16,"a",24),a(17,"People"),t()()(),i(18,"div",25)(19,"div",26)(20,"div",27)(21,"div",28)(22,"div",29)(23,"div",30)(24,"span",31),v(25,"i",32),t(),i(26,"div")(27,"p",33),a(28,"Car"),t(),i(29,"h6",34),a(30),t()()()(),i(31,"div",35)(32,"div",36)(33,"p",33),a(34,"Estimated Price"),t(),i(35,"h6",37),a(36),t()()()()(),i(37,"div",38)(38,"div",39)(39,"h6",40),a(40,"Reservation ID"),t(),i(41,"p",41),a(42),t()(),i(43,"div",39)(44,"h6",40),a(45,"Status"),t(),i(46,"span",18),a(47),t()(),i(48,"div",39)(49,"h6",40),a(50,"Scheduled At"),t(),i(51,"p"),a(52),t()(),i(53,"div",39)(54,"h6",40),a(55,"Meeting Date"),t(),i(56,"p"),a(57),t()(),i(58,"div",39)(59,"h6",40),a(60,"Created At"),t(),i(61,"p"),a(62),t()()(),i(63,"div",38)(64,"div",28)(65,"div",42)(66,"div",43)(67,"h6",44),a(68,"Meeting Address"),t(),i(69,"p"),a(70),t()()()()(),i(71,"div",3)(72,"h6",45),a(73,"Notes"),t(),i(74,"div",46)(75,"p",47),a(76),t()()(),i(77,"div",48)(78,"div",49)(79,"h6"),a(80,"Estimated Price"),t(),i(81,"h6",50),a(82),t()()()(),i(83,"div",51)(84,"div",28)(85,"div",52)(86,"div",3)(87,"h6",53),a(88,"Car ID"),t(),i(89,"p",54),a(90),t()()(),i(91,"div",52)(92,"div",3)(93,"h6",53),a(94,"Car Name"),t(),i(95,"p",55),a(96),t()()(),i(97,"div",52)(98,"div",3)(99,"h6",53),a(100,"Make"),t(),i(101,"p",55),a(102),t()()(),i(103,"div",52)(104,"div",3)(105,"h6",53),a(106,"Model"),t(),i(107,"p",55),a(108),t()()()()(),i(109,"div",56)(110,"div",28)(111,"div",52)(112,"div",57)(113,"h6",58),v(114,"i",59),a(115,"Viewer "),t(),i(116,"div",30)(117,"span",60),a(118),t(),i(119,"div")(120,"h6",61),a(121),t(),i(122,"p",62),a(123),t()()(),h(124,B,3,1,"div",63),t()(),i(125,"div",52)(126,"div",57)(127,"h6",58),v(128,"i",64),a(129,"Customer "),t(),h(130,$,6,2,"div",65)(131,O,3,0,"div",66)(132,U,3,1,"div",63),t()()()()()()(),i(133,"div",67)(134,"a",68),D("click",function(){b(e);let s=c();return E(s.goBack())}),v(135,"i",69),a(136,"Back to List "),t()()()}if(n&2){let e=c();r(5),l("ngClass",e.getStatusClass(e.reservationData.status)),r(),p(" ",e.reservationData.status||"N/A"," "),r(24),d(e.getCarName()),r(6),d(e.formatPrice(e.reservationData.estimatedPrice)),r(6),d(e.reservationData.id),r(4),l("ngClass",e.getStatusClass(e.reservationData.status)),r(),p(" ",e.reservationData.status||"N/A"," "),r(5),d(e.formatDateTime(e.reservationData.scheduledAt)),r(5),d(e.reservationData.meetingDate||"N/A"),r(5),d(e.formatDateTime(e.reservationData.createdAt)),r(8),d(e.reservationData.meetingAddress||"N/A"),r(6),d(e.reservationData.notes||"No notes available"),r(6),d(e.formatPrice(e.reservationData.estimatedPrice)),r(8),d(e.reservationData.carId||"N/A"),r(6),d(e.getCarName()),r(6),d(e.reservationData.carMake||"N/A"),r(6),d(e.reservationData.carModel||"N/A"),r(10),p(" ",e.getInitial(e.reservationData.viewerFirstName)," "),r(3),d(e.getViewerName()),r(2),d(e.reservationData.viewerEmail||"N/A"),r(),l("ngIf",e.reservationData.viewerId),r(6),l("ngIf",e.reservationData.customerId),r(),l("ngIf",!e.reservationData.customerId),r(),l("ngIf",e.reservationData.customerId)}}var C=(()=>{class n{constructor(e,o,s){this.route=e,this.router=o,this.apiService=s,this.routes=_,this.reservationData=null,this.isLoading=!0,this.hasError=!1,this.errorMessage="",this.mode="view"}ngOnInit(){this.route.params.subscribe(e=>{let o=e.id;this.mode=e.mode||"view";let s=sessionStorage.getItem("currentReservationData");if(s)try{let m=JSON.parse(s);m.originalData?this.reservationData=m.originalData:this.reservationData=m,this.isLoading=!1}catch(m){console.error("Error parsing stored reservation data:",m),this.fetchReservationFromAPI(o)}else o?this.fetchReservationFromAPI(o):(this.isLoading=!1,this.hasError=!0,this.errorMessage="No reservation ID provided")})}fetchReservationFromAPI(e){this.isLoading=!0;let o={page:0,sortBy:"Descending",fromDate:"",toDate:"",status:"",pageSize:1e4};this.apiService.getReservationsFilter(o).subscribe({next:s=>{if(this.isLoading=!1,s&&s.data&&Array.isArray(s.data)){let m=s.data.find(T=>T.id===e);m?this.reservationData=m:(this.hasError=!0,this.errorMessage="Reservation not found")}else this.hasError=!0,this.errorMessage="Failed to load reservation data"},error:s=>{this.isLoading=!1,this.hasError=!0,this.errorMessage="Failed to load reservation data. Please try again.",console.error("Error fetching reservation:",s)}})}getCarName(){return this.reservationData&&`${this.reservationData.carMake||""} ${this.reservationData.carModel||""}`.trim()||"N/A"}getCustomerName(){return this.reservationData&&`${this.reservationData.customerFirstName||""} ${this.reservationData.customerLastName||""}`.trim()||"N/A"}getViewerName(){return this.reservationData&&`${this.reservationData.viewerFirstName||""} ${this.reservationData.viewerLastName||""}`.trim()||"N/A"}formatDate(e){if(!e)return"N/A";try{return new Date(e).toLocaleDateString("en-US",{day:"2-digit",month:"short",year:"numeric"})}catch{return e}}formatDateTime(e){if(!e)return"N/A";try{return new Date(e).toLocaleString("en-US",{day:"2-digit",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})}catch{return e}}formatPrice(e){return!e&&e!==0?"N/A":`$${e.toFixed(2)}`}getStatusClass(e){switch(e?.toUpperCase()){case"NEW":return"bg-info-transparent";case"PENDING":return"bg-warning-transparent";case"CONFIRMED":return"bg-success-transparent";case"COMPLETED":return"bg-primary-transparent";case"CANCELLED":return"bg-danger-transparent";case"ACTIVE":return"bg-success-transparent";default:return"bg-secondary-transparent"}}getInitial(e){return e?e.charAt(0).toUpperCase():"?"}goBack(){this.router.navigate([this.routes.reservation])}directPage(){this.router.navigate([_.addReservation])}static{this.\u0275fac=function(o){return new(o||n)(x(A),x(M),x(L))}}static{this.\u0275cmp=N({type:n,selectors:[["app-reservation-details"]],standalone:!1,decls:10,vars:3,consts:[[1,"content","me-4"],[1,"row","justify-content-center"],[1,"col-md-10"],[1,"mb-3"],["href","javascript:void(0);",1,"d-inline-flex","align-items-center","fw-medium",3,"click"],[1,"ti","ti-arrow-narrow-left","me-2"],["class","text-center p-5",4,"ngIf"],["class","alert alert-danger text-center p-4",4,"ngIf"],[4,"ngIf"],[1,"text-center","p-5"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],[1,"alert","alert-danger","text-center","p-4"],[1,"ti","ti-alert-circle","me-2",2,"font-size","2rem"],[1,"btn","btn-primary","mt-2",3,"click"],[1,"card"],[1,"card-header","d-flex","align-items-center","justify-content-between"],[1,"badge",3,"ngClass"],[1,"card-body"],["role","tablist",1,"nav","nav-tabs","nav-tabs-solid","custom-nav-tabs","mb-3"],["role","presentation",1,"nav-item"],["href","#solid-tab1","data-bs-toggle","tab","aria-selected","true","role","tab",1,"nav-link","active"],["href","#solid-tab2","data-bs-toggle","tab","aria-selected","false","role","tab",1,"nav-link"],["href","#solid-tab3","data-bs-toggle","tab","aria-selected","false","role","tab",1,"nav-link"],[1,"tab-content"],["id","solid-tab1","role","tabpanel",1,"tab-pane","active","show"],[1,"border","rounded","p-3","bg-light","mb-3"],[1,"row"],[1,"col-8"],[1,"d-flex","align-items-center"],[1,"avatar","flex-shrink-0","me-2","bg-primary","text-white","d-flex","align-items-center","justify-content-center"],[1,"ti","ti-car"],[1,"mb-1","text-muted"],[1,"fs-14"],[1,"col-4"],[1,"text-end"],[1,"fs-14","text-success"],[1,"border-bottom","mb-3","pb-3"],[1,"d-flex","align-items-center","justify-content-between","mb-2"],[1,"fw-medium","fs-14"],[1,"text-muted"],[1,"col-md-12"],[1,"bg-light","p-3","rounded","mb-3"],[1,"mb-1","fs-14","fw-medium"],[1,"fw-medium","fs-14","mb-2"],[1,"bg-light","p-3","rounded"],[1,"mb-0"],[1,"border-top","pt-3"],[1,"d-flex","align-items-center","justify-content-between"],[1,"text-success"],["id","solid-tab2","role","tabpanel",1,"tab-pane"],[1,"col-md-6"],[1,"fs-14","fw-semibold","mb-1"],[1,"fs-13","text-muted"],[1,"fs-13"],["id","solid-tab3","role","tabpanel",1,"tab-pane"],[1,"border","rounded","p-3","mb-3"],[1,"d-inline-flex","align-items-center","fs-14","fw-medium","mb-3"],[1,"ti","ti-user","me-2"],[1,"avatar","avatar-rounded","flex-shrink-0","me-2","bg-info","text-white","d-flex","align-items-center","justify-content-center"],[1,"fs-14","fw-medium","mb-1"],[1,"mb-0","text-muted"],["class","mt-2",4,"ngIf"],[1,"ti","ti-users","me-2"],["class","d-flex align-items-center",4,"ngIf"],["class","text-muted",4,"ngIf"],[1,"d-flex","align-items-center","justify-content-center","flex-wrap","row-gap-3"],["href","javascript:void(0);",1,"btn","btn-secondary","me-3",3,"click"],[1,"ti","ti-arrow-left","me-1"],[1,"avatar","avatar-rounded","flex-shrink-0","me-2","bg-success","text-white","d-flex","align-items-center","justify-content-center"]],template:function(o,s){o&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"a",4),D("click",function(){return s.goBack()}),v(5,"i",5),a(6,"Back to Reservations "),t()(),h(7,F,6,0,"div",6)(8,V,6,1,"div",7)(9,z,137,24,"div",8),t()()()),o&2&&(r(7),l("ngIf",s.isLoading),r(),l("ngIf",s.hasError),r(),l("ngIf",!s.isLoading&&!s.hasError&&s.reservationData))},dependencies:[w,y],encapsulation:2})}}return n})();var G=[{path:"",component:C},{path:":id/:mode",component:C}],P=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=g({type:n})}static{this.\u0275inj=f({imports:[S.forChild(G),S]})}}return n})();var ne=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=g({type:n})}static{this.\u0275inj=f({imports:[R,P,k]})}}return n})();export{ne as ReservationDetailsModule};
