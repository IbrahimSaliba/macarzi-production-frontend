import{a as Y}from"./chunk-ZHXSHU6C.js";import{wd as H}from"./chunk-2BYPWJHQ.js";import"./chunk-WACMVKXJ.js";import"./chunk-2QSN2QZ4.js";import"./chunk-G2XYFENO.js";import"./chunk-A6GTVXL6.js";import{D as U,d as G,i as N,j as L,l as W,n as j,o as q,q as A,y as B}from"./chunk-KCCW6LK5.js";import{a as V}from"./chunk-KV7E3DUU.js";import{$a as M,Gc as I,Ja as s,Kb as a,Lb as O,Mb as x,Oa as k,Qb as R,Rb as S,Sb as w,Wa as D,Xa as C,Xc as F,Y as v,Zc as h,db as l,ga as b,ha as _,hb as E,ob as e,pb as i,qb as c,ub as y,uc as P,vc as T,wb as g,xb as p}from"./chunk-MSHI2ENP.js";import"./chunk-EQDQRRRY.js";function Z(n,f){if(n&1){let t=y();e(0,"div",43),c(1,"i",44),a(2),e(3,"button",45),g("click",function(){b(t);let r=p();return _(r.successMessage="")}),i()()}if(n&2){let t=p();s(2),x("",t.successMessage," ")}}function $(n,f){if(n&1){let t=y();e(0,"div",46),c(1,"i",47),a(2),e(3,"button",45),g("click",function(){b(t);let r=p();return _(r.errorMessage="")}),i()()}if(n&2){let t=p();s(2),x("",t.errorMessage," ")}}function ee(n,f){if(n&1){let t=y();e(0,"div",31)(1,"div",48)(2,"input",49),w("ngModelChange",function(r){b(t);let m=p();return S(m.selectedReportType,r)||(m.selectedReportType=r),_(r)}),i(),e(3,"label",50)(4,"div",10)(5,"div",51),c(6,"i"),e(7,"p",35),a(8),i()()()()()()}if(n&2){let t=f.$implicit,o=p();s(2),l("id","reportType_"+t.value)("value",t.value),R("ngModel",o.selectedReportType),s(),l("for","reportType_"+t.value),s(3),E("ti "+t.icon+" fs-24 mb-2"),s(2),O(t.label)}}function te(n,f){n&1&&c(0,"i",52)}function re(n,f){n&1&&c(0,"span",53)}var J=(()=>{class n{constructor(t){this.apiService=t,this.routes=V,this.reportTypes=[{value:"cars",label:"Car Report",icon:"ti-car"},{value:"reservations",label:"Reservations Report",icon:"ti-calendar"},{value:"customers",label:"Customer Report",icon:"ti-users"}],this.selectedReportType="",this.fromDate="",this.toDate="",this.isGenerating=!1,this.errorMessage="",this.successMessage=""}ngOnInit(){}convertDateFormat(t){if(!t||t.trim()==="")return"";let o=t.split("-");return o.length===3?`${o[2]}/${o[1]}/${o[0]}`:t}validateForm(){if(!this.selectedReportType)return this.errorMessage="Please select a report type",!1;if(!this.fromDate)return this.errorMessage="Please select a from date",!1;if(!this.toDate)return this.errorMessage="Please select a to date",!1;let t=new Date(this.fromDate),o=new Date(this.toDate);return t>o?(this.errorMessage="From date must be before or equal to To date",!1):!0}generateReport(){if(this.errorMessage="",this.successMessage="",!this.validateForm())return;this.isGenerating=!0;let t={fromDate:this.convertDateFormat(this.fromDate),toDate:this.convertDateFormat(this.toDate)},o;switch(this.selectedReportType){case"cars":o=this.apiService.generateCarReport(t);break;case"reservations":o=this.apiService.generateReservationReport(t);break;case"customers":o=this.apiService.generateCustomerReport(t);break;default:this.errorMessage="Invalid report type selected",this.isGenerating=!1;return}o.subscribe({next:r=>{this.isGenerating=!1,this.successMessage="Report generated successfully!";let m=new Blob([r],{type:"text/csv"}),d=window.URL.createObjectURL(m),u=document.createElement("a");u.href=d;let Q=new Date().toISOString().split("T")[0],X=`${this.selectedReportType}_report_${Q}.csv`;u.download=X,document.body.appendChild(u),u.click(),document.body.removeChild(u),window.URL.revokeObjectURL(d),setTimeout(()=>{this.successMessage=""},3e3)},error:r=>{this.isGenerating=!1,console.error("Error generating report:",r),r.error&&r.error.errorDescription?this.errorMessage=r.error.errorDescription:this.errorMessage="Failed to generate report. Please try again."}})}clearForm(){this.selectedReportType="",this.fromDate="",this.toDate="",this.errorMessage="",this.successMessage=""}static{this.\u0275fac=function(o){return new(o||n)(k(Y))}}static{this.\u0275cmp=D({type:n,selectors:[["app-reports"]],standalone:!1,decls:90,vars:11,consts:[[1,"content","me-4"],[1,"d-md-flex","d-block","align-items-center","justify-content-between","page-breadcrumb","mb-3"],[1,"my-auto","mb-2"],[1,"mb-1"],[1,"breadcrumb","mb-0"],[1,"breadcrumb-item"],[3,"routerLink"],["aria-current","page",1,"breadcrumb-item","active"],[1,"row"],[1,"col-xl-12"],[1,"card"],[1,"card-header"],[1,"card-title","mb-0"],[1,"card-body"],["class","alert alert-success alert-dismissible fade show","role","alert",4,"ngIf"],["class","alert alert-danger alert-dismissible fade show","role","alert",4,"ngIf"],[3,"ngSubmit"],[1,"col-md-12","mb-3"],[1,"form-label"],[1,"text-danger"],["class","col-md-4",4,"ngFor","ngForOf"],[1,"col-md-6","mb-3"],["type","date","name","fromDate","required","",1,"form-control",3,"ngModelChange","ngModel"],["type","date","name","toDate","required","",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-primary",3,"disabled"],["class","ti ti-download me-2",4,"ngIf"],["class","spinner-border spinner-border-sm me-2","role","status","aria-hidden","true",4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"click","disabled"],[1,"ti","ti-x","me-2"],[1,"row","mt-4"],[1,"col-md-4"],[1,"d-flex","align-items-center","mb-3"],[1,"avatar","avatar-sm","bg-primary-100","text-primary","me-3"],[1,"ti","ti-car","fs-18"],[1,"mb-0"],[1,"text-muted","mb-0","fs-13"],[1,"avatar","avatar-sm","bg-info-100","text-info","me-3"],[1,"ti","ti-calendar","fs-18"],[1,"avatar","avatar-sm","bg-success-100","text-success","me-3"],[1,"ti","ti-users","fs-18"],[1,"alert","alert-info","mb-0"],[1,"ti","ti-info-circle","me-2"],["role","alert",1,"alert","alert-success","alert-dismissible","fade","show"],[1,"ti","ti-check","me-2"],["type","button","aria-label","Close",1,"btn-close",3,"click"],["role","alert",1,"alert","alert-danger","alert-dismissible","fade","show"],[1,"ti","ti-alert-circle","me-2"],[1,"form-check","form-check-card","mb-3"],["type","radio","name","reportType",1,"form-check-input",3,"ngModelChange","id","value","ngModel"],[1,"form-check-label",3,"for"],[1,"card-body","text-center"],[1,"ti","ti-download","me-2"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm","me-2"]],template:function(o,r){o&1&&(e(0,"div",0)(1,"div",1)(2,"div",2)(3,"h4",3),a(4,"Reports"),i(),e(5,"nav")(6,"ol",4)(7,"li",5)(8,"a",6),a(9,"Home"),i()(),e(10,"li",7),a(11,"Reports"),i()()()()(),e(12,"div",8)(13,"div",9)(14,"div",10)(15,"div",11)(16,"h5",12),a(17,"Generate Report"),i()(),e(18,"div",13),M(19,Z,4,1,"div",14)(20,$,4,1,"div",15),e(21,"form",16),g("ngSubmit",function(){return r.generateReport()}),e(22,"div",8)(23,"div",17)(24,"label",18),a(25,"Report Type "),e(26,"span",19),a(27,"*"),i()(),e(28,"div",8),M(29,ee,9,7,"div",20),i()(),e(30,"div",21)(31,"label",18),a(32,"From Date "),e(33,"span",19),a(34,"*"),i()(),e(35,"input",22),w("ngModelChange",function(d){return S(r.fromDate,d)||(r.fromDate=d),d}),i()(),e(36,"div",21)(37,"label",18),a(38,"To Date "),e(39,"span",19),a(40,"*"),i()(),e(41,"input",23),w("ngModelChange",function(d){return S(r.toDate,d)||(r.toDate=d),d}),i()()(),e(42,"div",24)(43,"button",25),M(44,te,1,0,"i",26)(45,re,1,0,"span",27),a(46),i(),e(47,"button",28),g("click",function(){return r.clearForm()}),c(48,"i",29),a(49,"Clear "),i()()()()()()(),e(50,"div",30)(51,"div",9)(52,"div",10)(53,"div",11)(54,"h5",12),a(55,"Report Information"),i()(),e(56,"div",13)(57,"div",8)(58,"div",31)(59,"div",32)(60,"div",33),c(61,"i",34),i(),e(62,"div")(63,"h6",35),a(64,"Car Report"),i(),e(65,"p",36),a(66,"Export all car data within the selected date range"),i()()()(),e(67,"div",31)(68,"div",32)(69,"div",37),c(70,"i",38),i(),e(71,"div")(72,"h6",35),a(73,"Reservations Report"),i(),e(74,"p",36),a(75,"Export all reservation data within the selected date range"),i()()()(),e(76,"div",31)(77,"div",32)(78,"div",39),c(79,"i",40),i(),e(80,"div")(81,"h6",35),a(82,"Customer Report"),i(),e(83,"p",36),a(84,"Export all customer data within the selected date range"),i()()()()(),e(85,"div",41),c(86,"i",42),e(87,"strong"),a(88,"Note:"),i(),a(89," All reports are generated in CSV format and will be downloaded automatically after generation. "),i()()()()()()),o&2&&(s(8),l("routerLink",r.routes.adminDashboard),s(11),l("ngIf",r.successMessage),s(),l("ngIf",r.errorMessage),s(9),l("ngForOf",r.reportTypes),s(6),R("ngModel",r.fromDate),s(6),R("ngModel",r.toDate),s(2),l("disabled",r.isGenerating),s(),l("ngIf",!r.isGenerating),s(),l("ngIf",r.isGenerating),s(),x(" ",r.isGenerating?"Generating...":"Generate & Download CSV"," "),s(),l("disabled",r.isGenerating))},dependencies:[P,T,q,G,A,N,L,B,j,W,F],styles:[".form-check-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]{position:absolute;opacity:0}.form-check-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked + .form-check-label[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-color:#5d87ff;background-color:#f0f4ff}.form-check-card[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;border:2px solid #e0e6ed}.form-check-card[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{border-color:#5d87ff;transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}.form-check-card[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]{padding:1.5rem}.form-check-card[_ngcontent-%COMP%]   .form-check-label[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5d87ff}.form-check-card[_ngcontent-%COMP%]   .form-check-input[_ngcontent-%COMP%]:checked + .form-check-label[_ngcontent-%COMP%]   .card-body[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#5d87ff}"]})}}return n})();var ie=[{path:"",component:J}],K=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=C({type:n})}static{this.\u0275inj=v({imports:[h.forChild(ie),h]})}}return n})();var Ce=(()=>{class n{static{this.\u0275fac=function(o){return new(o||n)}}static{this.\u0275mod=C({type:n})}static{this.\u0275inj=v({imports:[I,U,h,K,H]})}}return n})();export{Ce as ReportsModule};
