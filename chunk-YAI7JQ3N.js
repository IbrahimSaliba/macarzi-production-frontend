import{a as U}from"./chunk-NRINXQYY.js";import{a as R}from"./chunk-ZHXSHU6C.js";import{wd as F}from"./chunk-2BYPWJHQ.js";import"./chunk-WACMVKXJ.js";import"./chunk-2QSN2QZ4.js";import"./chunk-G2XYFENO.js";import"./chunk-A6GTVXL6.js";import{d as N,i as D,j,l as T,n as V,o as W}from"./chunk-KCCW6LK5.js";import{a as p}from"./chunk-KV7E3DUU.js";import{$a as h,Gc as E,Ja as a,Kb as o,Mb as b,Oa as u,Qb as y,Rb as w,Sb as L,Wa as M,Wc as I,Xa as f,Xc as P,Y as c,Zc as S,db as m,ob as i,pb as r,qb as g,tc as C,vc as k,wb as v,xb as x}from"./chunk-MSHI2ENP.js";import"./chunk-EQDQRRRY.js";function G(n,_){n&1&&(i(0,"div",39)(1,"div",40)(2,"span",41),o(3,"Loading..."),r()(),i(4,"p",42),o(5,"Logging in..."),r()())}function q(n,_){if(n&1&&(i(0,"div",43),o(1),r()),n&2){let s=x();a(),b(" ",s.errorMessage," ")}}function z(n,_){n&1&&g(0,"span",44)}var B=(()=>{class n{togglePassword(s){this.password[s]=!this.password[s]}constructor(s,t,e){this.router=s,this.apiService=t,this.authService=e,this.routes=p,this.password=[!1,!1],this.username="",this.passwordValue="",this.isLoading=!1,this.errorMessage=""}ngOnInit(){}performLogin(){if(!this.username||!this.passwordValue){this.errorMessage="Please enter both username and password";return}this.isLoading=!0,this.errorMessage="";let s={username:this.username,password:this.passwordValue};this.apiService.login(s).subscribe({next:t=>{if(this.isLoading=!1,t.errorCode==="000000"){let e=t.errorDescription||"";e&&e.length>50&&e.includes(".")?(this.authService.setToken(e),this.apiService.getUserInfo(e).subscribe({next:l=>{l&&this.authService.setUserInfo(l),this.router.navigate([p.adminDashboard])},error:l=>{console.error("Error fetching user info:",l),this.router.navigate([p.adminDashboard])}})):(this.authService.setUsername(this.username),this.router.navigate([p.adminOtp]))}else this.errorMessage=t.errorDescription||t.message||"Login failed. Please check your credentials."},error:t=>{this.isLoading=!1,t.error?t.error.errorDescription?this.errorMessage=t.error.errorDescription:t.error.message?this.errorMessage=t.error.message:this.errorMessage="Login failed. Please try again.":this.errorMessage="Login failed. Please check your connection and try again.",console.error("Login error:",t)}})}directIndex(){this.router.navigate([p.adminDashboard])}static{this.\u0275fac=function(t){return new(t||n)(u(I),u(R),u(U))}}static{this.\u0275cmp=M({type:n,selectors:[["app-login"]],standalone:!1,decls:51,vars:10,consts:[[1,"container-fuild"],[1,"w-100","overflow-hidden","position-relative","flex-wrap","d-block","vh-100"],[1,"row","justify-content-center","align-items-center","vh-100","overflow-auto","flex-wrap"],[1,"col-lg-5","mx-auto"],[1,"p-4",3,"ngSubmit"],[1,"mx-auto","mb-5","text-center"],["src","assets/img/logo-black.png","alt","Logo",1,"img-fluid"],[1,"card","authentication-card","mb-0"],[1,"card-body"],[1,"login-icon","bg-dark","d-flex","align-items-center","justify-content-center","mx-auto","mb-4"],[1,"ti","ti-login","fs-24"],[1,"text-center","mb-3"],[1,"mb-1"],[1,"mb-0"],["class","text-center mt-3",4,"ngIf"],["class","alert alert-danger mt-3","role","alert",4,"ngIf"],[1,"mb-3"],[1,"form-label"],[1,"text-danger"],[1,"input-group"],["type","text","name","username","placeholder","Enter username",1,"form-control","border-end-0",3,"ngModelChange","ngModel"],[1,"input-group-text","border-start-0"],[1,"ti","ti-user-circle"],[1,"pass-group"],["name","password","placeholder","Enter password",1,"pass-inputs","form-control",3,"ngModelChange","type","ngModel"],["tabindex","0",1,"ti","toggle-password",3,"click","keydown.enter","ngClass"],[1,"d-flex","align-items-center","justify-content-between","mb-3"],[1,"d-flex","align-items-center"],[1,"form-check","form-check-md","mb-0"],["id","remember_me","type","checkbox",1,"form-check-input"],["for","remember_me",1,"form-check-label","mt-0"],[1,"text-end"],[1,"link-default","text-decoration-underline",3,"routerLink"],[1,"mt-3"],["type","submit",1,"btn","btn-dark","w-100",3,"disabled"],["class","spinner-border spinner-border-sm me-2","role","status",4,"ngIf"],[1,"login-bg"],["src","assets/admin/assets/img/bg/login-bg-01.png","alt","img",1,"login-bg-01"],["src","assets/admin/assets/img/bg/login-bg-02.png","alt","img",1,"login-bg-02"],[1,"text-center","mt-3"],["role","status",1,"spinner-border","text-primary"],[1,"visually-hidden"],[1,"mt-2"],["role","alert",1,"alert","alert-danger","mt-3"],["role","status",1,"spinner-border","spinner-border-sm","me-2"]],template:function(t,e){t&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"form",4),v("ngSubmit",function(){return e.performLogin()}),i(5,"div",5),g(6,"img",6),r(),i(7,"div",7)(8,"div",8)(9,"div",9),g(10,"i",10),r(),i(11,"div",11)(12,"h4",12),o(13,"Welcome Back"),r(),i(14,"p",13),o(15,"Please enter your details to sign in"),r(),h(16,G,6,0,"div",14)(17,q,2,1,"div",15),r(),i(18,"div",16)(19,"label",17),o(20,"Email / Username "),i(21,"span",18),o(22,"*"),r()(),i(23,"div",19)(24,"input",20),L("ngModelChange",function(d){return w(e.username,d)||(e.username=d),d}),r(),i(25,"span",21),g(26,"i",22),r()()(),i(27,"div",16)(28,"label",17),o(29,"Password "),i(30,"span",18),o(31,"*"),r()(),i(32,"div",23)(33,"input",24),L("ngModelChange",function(d){return w(e.passwordValue,d)||(e.passwordValue=d),d}),r(),i(34,"span",25),v("click",function(){return e.togglePassword(0)})("keydown.enter",function(){return e.togglePassword(0)}),r()()(),i(35,"div",26)(36,"div",27)(37,"div",28),g(38,"input",29),i(39,"label",30),o(40,"Remember Me"),r()()(),i(41,"div",31)(42,"a",32),o(43,"Forgot Password"),r()()(),i(44,"div",33)(45,"button",34),h(46,z,1,0,"span",35),o(47),r()()()()()()()()(),i(48,"div",36),g(49,"img",37)(50,"img",38),r()),t&2&&(a(16),m("ngIf",e.isLoading),a(),m("ngIf",e.errorMessage),a(7),y("ngModel",e.username),a(9),m("type",e.password[0]?"text":"password"),y("ngModel",e.passwordValue),a(),m("ngClass",e.password[0]?"ti-eye":"ti-eye-off"),a(8),m("routerLink",e.routes.adminForgotPassword),a(3),m("disabled",e.isLoading),a(),m("ngIf",e.isLoading),a(),b(" ",e.isLoading?"Logging in...":"Login"," "))},dependencies:[C,k,P,W,N,D,j,V,T],styles:[".img-fluid[_ngcontent-%COMP%]{width:50%!important}"]})}}return n})();var H=[{path:"",component:B}],O=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=f({type:n})}static{this.\u0275inj=c({imports:[S.forChild(H),S]})}}return n})();var le=(()=>{class n{static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275mod=f({type:n})}static{this.\u0275inj=c({imports:[E,O,F]})}}return n})();export{le as LoginModule};
